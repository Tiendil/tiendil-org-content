<script type="text/javascript">

function fillFilters() {
    var index = 0;

    var selects = document.querySelectorAll('.plot-filter-margin');

    for (var select of selects) {

        select.id = 'plot-filter-' + index;
        index++;

        for (var margin of marginLevels) {
            var option = document.createElement('option');
            option.value = margin.id;
            option.text = margin.name;
            select.appendChild(option);
        }
    }
}

fillFilters();

function selectFilterMargin(value, filterVarName, skipEvent) {
    window[filterVarName] = value;

    var selects = document.querySelectorAll(`.plot-filter-margin.${filterVarName}`);

    for (var select of selects) {
        select.value = value;
    }

    if (skipEvent != 'skip-event') {
        document.dispatchEvent(redrawPlots);
    }
}


selectFilterMargin(filterASubMargin, 'filterASubMargin', 'skip-event');
selectFilterMargin(filterATokenMargin, 'filterATokenMargin', 'skip-event');
selectFilterMargin(filterBSubMargin, 'filterBSubMargin', 'skip-event');
selectFilterMargin(filterBTokenMargin, 'filterBTokenMargin', 'skip-event');

document.dispatchEvent(redrawPlots);

</script>
